/*
 *     Generated by class-dump 3.1.2.
 *
 *     class-dump is Copyright (C) 1997-1998, 2000-2001, 2004-2007 by Steve Nygard.
 */

#import "_ABAddressBookCopyArrayOfAllGroups.h"

#import "CLLocationManagerDelegate-Protocol.h"
#import "NSFetchedResultsControllerDelegate-Protocol.h"
#import "WAMediaUploadOperationDelegate-Protocol.h"

@class CLLocation, CLLocationManager, NSCondition, NSFetchedResultsController, NSManagedObjectContext, NSManagedObjectModel, NSMutableArray, NSMutableSet, NSObject<OS_dispatch_group>, NSObject<OS_dispatch_queue>, NSOperationQueue, NSPersistentStore, NSPersistentStoreCoordinator, NSString, WABlockedContactsList, WASearchEngine, WATask;

@interface WAChatStorage : _ABAddressBookCopyArrayOfAllGroups <CLLocationManagerDelegate, NSFetchedResultsControllerDelegate, WAMediaUploadOperationDelegate>
{
    NSOperationQueue *_mediaUploadQueue;
    WATask *_indexMessagesTask;
    WATask *_deleteMessagesTask;
    NSManagedObjectModel *_managedObjectModel;
    NSPersistentStoreCoordinator *_persistentStoreCoordinator;
    NSManagedObjectContext *_parentMOC;
    NSManagedObjectContext *_managedObjectContext;
    unsigned int _saveMOCCounter;
    BOOL _processingMessages;
    NSCondition *_processMessagesCondition;
    NSMutableArray *_insertedChats;
    NSMutableArray *_deletedChats;
    NSMutableArray *_updatedChats;
    NSFetchedResultsController *_allChatsResultsController;
    WASearchEngine *_searchEngine;
    NSObject<OS_dispatch_group> *_searchEngineDispatchGroup;
    NSString *_currentSearchText;
    NSObject<OS_dispatch_queue> *_backgroundFetchingQueue;
    BOOL _groupLocationRequested;
    id <WAChatStorageDelegate> _delegate;
    NSPersistentStore *_chatStore;
    WABlockedContactsList *_blockedContactsList;
    NSMutableArray *_mediaAutodownloadRetryArray;
    NSMutableArray *_URLSessionTasksToProcessOnCreateMOC;
    CLLocationManager *_locationManager;
    CLLocation *_bestLocation;
    NSMutableSet *_locationQueue;
    CLLocation *_lastReportedLocation;
    unsigned int _locationSharingBackgroundTask;
}

+ (BOOL)useAsyncSave;
+ (id)errorWithDescription:(id)fp8 failureReason:(id)fp12;
- (void)setLocationSharingBackgroundTask:(unsigned int)fp8;
- (unsigned int)locationSharingBackgroundTask;
- (void)setLastReportedLocation:(id)fp8;
- (id)lastReportedLocation;
- (void)setGroupLocationRequested:(BOOL)fp8;
- (BOOL)groupLocationRequested;
- (void)setLocationQueue:(id)fp8;
- (id)locationQueue;
- (void)setBestLocation:(id)fp8;
- (id)bestLocation;
- (void)setLocationManager:(id)fp8;
- (id)locationManager;
- (void)setURLSessionTasksToProcessOnCreateMOC:(id)fp8;
- (id)URLSessionTasksToProcessOnCreateMOC;
- (void)setMediaAutodownloadRetryArray:(id)fp8;
- (id)mediaAutodownloadRetryArray;
- (id)currentSearchText;
- (id)blockedContactsList;
- (id)chatStore;
- (void)setDelegate:(id)fp8;
- (id)delegate;
- (id)searchEngine;
- (void).cxx_destruct;
- (id)existingChatSessionForJID:(id)fp8;
- (id)allMemberJIDsInBroadcastList:(id)fp8;
- (id)sortedBroadcastLists;
- (id)blockedJIDs;
- (id)mediaUploadQueue;
- (unsigned int)countAllImageMessages;
- (unsigned int)countAllExistingDownloadedMediaMessagesOfType:(unsigned int)fp8 forJID:(id)fp12;
- (unsigned int)countAllDownloadedMediaMessagesOfType:(unsigned int)fp8;
- (unsigned int)countAllTextMessages;
- (unsigned int)countAllMessagesOfType:(unsigned int)fp8 forJID:(id)fp12;
- (unsigned int)countAllMessagesOfType:(unsigned int)fp8;
- (unsigned int)countEntitiesOfType:(Class)fp8 withPredicateFormat:(id)fp12;
- (id)chatSessionForJID:(id)fp8 inContext:(id)fp12;
- (id)chatSessionForJID:(id)fp8;
- (id)allGroupChatSessions;
- (id)allChatSessionsWithPrefetchedRelationships:(id)fp8 includeBroadcastLists:(BOOL)fp12;
- (id)newManagedObjectContext;
- (id)managedObjectContext;
- (void)performAfterTrampoliningThroughMOCQueues:(id)fp(null);
- (void)dropStoreWithCompletionHandler:(id)fp(null);
- (void)sendChatStorageDidLoadDatabaseNotification;
- (BOOL)loadPersistentStore;
- (id)persistentStoreURL;
- (id)persistentStorePath;
- (void)dealloc;
- (id)init;
- (id)outgoingMessageWithSharedItem:(id)fp8;
- (id)outgoingMessagesInSharedItemOutbox:(id)fp8;
- (id)debug_filePathStrings;
- (id)debug_filePathsRowForType:(unsigned int)fp8;
- (id)debug_averageStrings;
- (id)statisticsForExtension:(id)fp8 amongResources:(id)fp12;
- (id)videoFilePathsShouldCancel:(id)fp(null);
- (id)mediaFilePathsShouldCancel:(id)fp(null);
- (id)thumbnailFilePathsShouldCancel:(id)fp(null);
- (id)filePathsForProperties:(id)fp8 ofTypes:(id)fp12 shouldCancel:(id)fp(null);
- (id)estimatedVideoUploadSize;
- (void)calculatePotentialBackupSize:(CDAnonymousStruct7 *)fp8;
- (long long)calculateThumbnailTARExpectedSizeForSmallItemCount:(unsigned int)fp8 largeItemCount:(unsigned int)fp12;
- (long long)calculateVideoTARExpectedSizeWithItemCount:(unsigned int)fp8;
- (long long)calculateMediaTARExpectedSizeWithItemCount:(unsigned int)fp8;
- (long long)calculateStandardTarSizeForCount:(unsigned int)fp8;
- (void)calculateDatabaseSizes:(CDAnonymousStruct14 *)fp8;
- (long long)sizeForMediaOfType:(unsigned int)fp8 forJID:(id)fp12;
- (long long)sizeForMediaOfType:(unsigned int)fp8;
- (void)finishProcessingRemainingMessages;
- (void)saveBlockedJIDs:(id)fp8;
- (void)locationManager:(id)fp8 didFailWithError:(id)fp12;
- (void)locationManager:(id)fp8 didUpdateToLocation:(id)fp12 fromLocation:(id)fp16;
- (void)useBestLocationResult:(id)fp8;
- (void)stopLocationManagerIfPossible;
- (void)startLocationManagerIfNecessary;
- (void)locationUpdatesRequestExpired;
- (void)stopGroupLocationSharing;
- (void)startGroupLocationSharingForDuration:(double)fp8;
- (void)locationRequestFailedWithError:(id)fp8 userInfo:(id)fp12;
- (void)locationRequestFinishedWithLocation:(id)fp8 userInfo:(id)fp12;
- (void)requestLocationWithCallbackDictionary:(id)fp8;
- (void)requestLocationForMessage:(id)fp8;
- (void)resendPendingReceipts;
- (void)debug_deleteAllOrphanedMessagesNow;
- (id)replaceChatSessionWithEmptySession:(id)fp8;
- (void)deleteMessages:(id)fp8 inChatSession:(id)fp12;
- (void)deleteAllMessagesInSession:(id)fp8;
- (void)clearAllChatSessions;
- (void)deleteAllChatSessions;
- (void)deleteChatSession:(id)fp8 fromWebClient:(BOOL)fp12;
- (void)deleteChatSession:(id)fp8;
- (id)receivedMessagesWithStanzaID:(id)fp8;
- (id)receivedVoiceMessagesWithStanzaID:(id)fp8;
- (void)reportFieldStatsForSentMessage:(id)fp8 sentSuccess:(BOOL)fp12;
- (void)changeStatus:(unsigned int)fp8 forOutgoingMessages:(id)fp12 fromJID:(id)fp16 participantJID:(id)fp20 userData:(id)fp24 playSound:(out char *)fp28;
- (void)changeStatus:(unsigned int)fp8 forOutgoingMessagesWithStanzaIDs:(id)fp12 fromJID:(id)fp16 participantJID:(id)fp20 userData:(id)fp24 playSound:(out char *)fp28;
- (void)changeStatus:(unsigned int)fp8 forIncomingMessageWithStanzaID:(id)fp12 fromJID:(id)fp16 participantJID:(id)fp20;
- (void)storeModifiedMessage:(id)fp8 notify:(BOOL)fp12;
- (void)updateChatSessionWithMessage:(id)fp8;
- (void)sendVCard:(id)fp8 inChatSession:(id)fp12;
- (void)sendPlace:(id)fp8 inChatSession:(id)fp12 completion:(id)fp(null);
- (void)sendMessageWithMedia:(id)fp8;
- (id)messageWithAudioFilePath:(id)fp8 inChatSession:(id)fp12 origin:(unsigned int)fp16 durationSeconds:(int)fp20 doNotUpload:(BOOL)fp24 streaming:(BOOL)fp28 streamingHash:(id)fp32 error:(out id *)fp36;
- (void)sendAudioTrack:(id)fp8 inChatSession:(id)fp12 completion:(id)fp(null);
- (void)sendVideoAtURL:(id)fp8 caption:(id)fp12 collectionID:(id)fp16 index:(int)fp20 count:(int)fp24 inChatSession:(id)fp28 completion:(id)fp(null);
- (void)sendMessageWithImage:(id)fp8 caption:(id)fp12 collectionID:(id)fp16 index:(int)fp20 count:(int)fp24 inChatSession:(id)fp28 completion:(id)fp(null);
- (void)sendMessageWithImage:(id)fp8 caption:(id)fp12 inChatSession:(id)fp16 completion:(id)fp(null);
- (void)sendMessageWithText:(id)fp8 metadata:(id)fp12 inChatSession:(id)fp16;
- (BOOL)isChatSessionForExistingUser:(id)fp8;
- (void)forwardMessages:(id)fp8 toChatSession:(id)fp12;
- (void)retrySendingMessage:(id)fp8;
- (void)sendMessage:(id)fp8 notify:(BOOL)fp12;
- (void)resendAllServerErrorReceiptsWithoutAck;
- (void)receivedServerErrorForStanzaIDs:(id)fp8 fromJID:(id)fp12 participantJID:(id)fp16;
- (void)receivedServerErrorAckForStanzaID:(id)fp8 fromJID:(id)fp12 participantJID:(id)fp16;
- (id)sentMessagesWithStanzaIDs:(id)fp8 jid:(id)fp12;
- (id)sentMessagesWithStanzaID:(id)fp8 jid:(id)fp12;
- (void)receiveError:(id)fp8 forMessage:(id)fp12;
- (id)groupMembersWithJIDs:(id)fp8;
- (BOOL)findContactInContext:(id)fp8 forChatSession:(id)fp12;
- (void)updateChatSessionWithContactData:(id)fp8;
- (void)receiveChatMessages:(id)fp8 completion:(id)fp(null);
- (void)addMessage:(id)fp8 toChatSession:(id)fp12 withGroupMember:(id)fp16;
- (id)outgoingMessageTemplateForSession:(id)fp8 withMedia:(BOOL)fp12;
- (id)messageWithMessageStanza:(id)fp8;
- (void)setChatSession:(id)fp8 archived:(BOOL)fp12 notifyWebClient:(BOOL)fp16 saveChanges:(BOOL)fp20;
- (void)setChatSession:(id)fp8 archived:(BOOL)fp12;
- (void)setAllChatSessionsArchived:(BOOL)fp8;
- (id)createChatSessionForContact:(id)fp8 JID:(id)fp12 eligibleForDeletionIfEmpty:(BOOL)fp16;
- (id)createChatSessionForContact:(id)fp8 JID:(id)fp12;
- (id)createChatSessionForContact:(id)fp8 JID:(id)fp12 eligibleForDeletionIfEmpty:(BOOL)fp16 hidden:(BOOL)fp20;
- (id)newChatSessionWithJID:(id)fp8;
- (id)newOrExistingChatSessionForJID:(id)fp8;
- (id)refetchAllMessages:(id)fp8;
- (id)messageWithStanzaID:(id)fp8 isFromMe:(BOOL)fp12 inChatSession:(id)fp16;
- (id)messageWithStanzaID:(id)fp8 isFromMe:(BOOL)fp12 inChatSessionWithJID:(id)fp16;
- (id)messageWithID:(id)fp8 inContext:(id)fp12;
- (id)messageWithID:(id)fp8;
- (id)receivedMessagesWithStanzaIDs:(id)fp8;
- (unsigned int)countOfMessagesAfterMessage:(id)fp8;
- (id)unreadMessagesForSession:(id)fp8 startOffset:(unsigned int)fp12;
- (id)messagesForSession:(id)fp8 startOffset:(unsigned int)fp12 limit:(unsigned int)fp16;
- (int)compareNumberOfMessagesInChatSession:(id)fp8 withNumber:(unsigned int)fp12;
- (BOOL)hasUnarchivedChatSessions;
- (BOOL)hasArchivedChatSessions;
- (unsigned int)archivedChatSessionsCount;
- (BOOL)hasChatMessages;
- (BOOL)chatSessionsWithJIDsContainMessages:(id)fp8;
- (id)existingChatSessionsForJIDs:(id)fp8 prefetchingLastMessage:(BOOL)fp12;
- (id)existingChatSessionsForContact:(id)fp8 includeLinkedContacts:(BOOL)fp12;
- (id)chatSessionWithObjectID:(id)fp8;
- (id)chatSessionsForContactsUpdateInContext:(id)fp8;
- (void)xmppConnectionStateDidChange:(id)fp8;
- (void)mediaDownloadPolicyDidChange:(id)fp8;
- (void)didReceiveMemoryWarning:(id)fp8;
- (void)applicationWillEnterForeground:(id)fp8;
- (void)reportChatsFieldStatsIfNeeded;
- (void)controllerDidChangeContent:(id)fp8;
- (void)controller:(id)fp8 didChangeObject:(id)fp12 atIndexPath:(id)fp16 forChangeType:(unsigned int)fp20 newIndexPath:(id)fp24;
- (void)controllerWillChangeContent:(id)fp8;
- (void)setUpFetchedResultsControllers;
- (void)markAsCorrupted;
- (void)changeAfterRestore;
- (void)removeGroupPictureIDs;
- (void)setMetadata:(id)fp8 forKey:(id)fp12;
- (id)metadataForKey:(id)fp8;
- (void)deleteStorage;
- (void)workerMOCDidSave:(id)fp8;
- (void)saveContextAndMergeChanges:(id)fp8 completion:(id)fp(null);
- (void)delayedSave;
- (void)checkMOCForObjectsWithTemporaryIDs:(id)fp8;
- (void)saveMainMOCOnly;
- (void)internalSaveWithCompletionHandler:(id)fp(null);
- (void)saveWithCompletionHandler:(id)fp(null);
- (void)saveAndWaitUntilDone:(BOOL)fp8;
- (void)save;
- (id)saveNonMainManagedObjectContext:(id)fp8;
- (BOOL)contextContainsUnindexedMessages:(id)fp8;
- (void)setUpRecurringTasksIfNeeded;
- (void)performAfterMOCCreated;
- (void)performAfterStoreDrop;
- (void)performBeforeStoreDrop;
- (void)performAfterStoreAdd;
- (void)performBeforeStoreAdd;
- (void)performAfterInit;
- (void)reportSearchIndexStatsIfNeededWithLastIndexedMessagesCount:(int)fp8 completion:(id)fp(null);
- (void)removeSearchIndex;
- (BOOL)hasSufficientFreeDiskSpaceForSearchIndexing;
- (void)searchChatSessionsMatchingText:(id)fp8 completion:(id)fp(null);
- (void)searchMessagesMatchingText:(id)fp8 chatSessionJIDs:(id)fp12 starredOnly:(BOOL)fp16 offset:(unsigned int)fp20 limit:(unsigned int)fp24 completion:(id)fp(null);
- (id)lastIncomingMessagesInChatSession:(id)fp8;
- (unsigned int)countOfWebURLMessagesInChatSessions:(id)fp8;
- (void)relayOutgoingMessageStanza:(id)fp8;
- (id)allOutgoingMessagesAndPTTInChatSessionIncludingAndAfterMessage:(id)fp8;
- (id)allRecentlyRelevantMessagesInChats;
- (id)allChatSessions;
- (id)messagesInChatSession:(id)fp8 afterMessage:(id)fp12 count:(unsigned int)fp16;
- (id)messagesInChatSession:(id)fp8 beforeStanzaID:(id)fp12 isFromMe:(BOOL)fp16 participant:(id)fp20 count:(unsigned int)fp24;
- (id)messagesWithMessageIDs:(id)fp8 inChatSession:(id)fp12;
- (id)messageWithStanzaID:(id)fp8 participant:(id)fp12 isFromMe:(BOOL)fp16 inChatSession:(id)fp20;
- (id)messageWithStanzaID:(id)fp8 participant:(id)fp12 isFromMe:(BOOL)fp16 inChatSessionWithJID:(id)fp20;
- (void)reportMigrationTimeFieldStatsWithDuration:(double)fp8 databaseSize:(long long)fp16;
- (void)migrateChatDatabaseWithCompletionHandler:(id)fp(null);
- (BOOL)addMediaSectionIDToAllMessagesInContext:(id)fp8;
- (id)validMessageObjectIDsInMediaItems:(id)fp8 context:(id)fp12;
- (void)migrateChatNotificationSettingsInContext:(id)fp8;
- (void)migrateGroupAdminAndCreatorInContext:(id)fp8;
- (void)migrateChatSessionPropertiesInContext:(id)fp8;
- (void)migrateGroupMemberPropertiesInContext:(id)fp8;
- (unsigned int)databaseStatus;
- (void)deleteAllMedia;
- (void)mediaUploadOperation:(id)fp8 uploadProgressChanged:(float)fp12;
- (void)mediaUploadOperation:(id)fp8 didFailWithError:(id)fp12;
- (void)mediaUploadOperationDidFinish:(id)fp8;
- (void)didFinishDownloadingMediaInMessage:(id)fp8 toPath:(id)fp12 usingLocalCopy:(BOOL)fp16;
- (void)didFailToDownloadMediaInMessage:(id)fp8 autodownload:(BOOL)fp12 error:(id)fp16;
- (void)URLSessionManagerDidFinishDownloadTask:(id)fp8;
- (void)URLSessionManagerDidUpdateTaskProgress:(id)fp8;
- (void)URLSessionManagerDidChangeState:(id)fp8;
- (void)handleCompletedURLSessionDownloadTask:(id)fp8;
- (id)messagesWithDownloadIdentifiers:(id)fp8;
- (id)messageWithDownloadIdentifier:(id)fp8;
- (void)cancelAllDownloads;
- (void)cancelAllUploads;
- (void)cancelMediaDownloadForMessage:(id)fp8;
- (void)queueMediaDownloadForMessage:(id)fp8 autodownload:(BOOL)fp12;
- (void)retryMediaDownloadForMessage:(id)fp8;
- (void)processPendingAutodownloads;
- (void)checkMessagesForMediaAutodownload;
- (void)cancelFileUploadForMessage:(id)fp8;
- (void)startMediaUploadForMessage:(id)fp8;
- (void)reuploadMediaInMessage:(id)fp8 completion:(id)fp(null);
- (id)streamingUploadingOperationForMediaAtPath:(id)fp8;
- (void)abortMediaUploadDownloadOperationForMessage:(id)fp8;
- (void)fetchLocationMessagesInChatSession:(id)fp8 afterDate:(id)fp12 completion:(id)fp(null);
- (unsigned int)countSentMedia;
- (id)libraryPathToMediaItemWithHash:(id)fp8;
- (id)starredMessagesInChatSessionsWithJIDs:(id)fp8 startOffset:(unsigned int)fp12 limit:(unsigned int)fp16;
- (void)markMessage:(id)fp8 asStarred:(BOOL)fp12;
- (void)addGroupPictureChangeEventToWAChatSession:(id)fp8 authorJID:(id)fp12 timestamp:(id)fp16;
- (void)addGroupPictureDeleteEventToWAChatSession:(id)fp8 authorJID:(id)fp12 timestamp:(id)fp16;
- (void)requestAndMergeAllListsFromServerWithCompletionHandler:(id)fp(null);
- (id)insertListIfNeeded:(id)fp8 inContext:(id)fp12;
- (void)removeGroupMember:(id)fp8 fromList:(id)fp12 createGroupEvent:(BOOL)fp16;
- (BOOL)addGroupMemberWithInfo:(id)fp8 toList:(id)fp12 createGroupEvent:(BOOL)fp16;
- (void)requestListsIfNeeded;
- (void)addInitialGroupEventToNewList:(id)fp8;
- (id)createMessageTemplateForGroupEventInList:(id)fp8;
- (id)createNewList;
- (id)assignNewBroadcastJID;
- (void)demoteParticipantsWithJIDs:(id)fp8 inChatSession:(id)fp12 notification:(id)fp16;
- (void)promoteParticipantsWithJIDs:(id)fp8 inChatSession:(id)fp12 notification:(id)fp16;
- (void)requestPromotionOfMemberWithJID:(id)fp8 inGroupWithJID:(id)fp12 webClientRequestID:(id)fp16 completion:(id)fp(null);
- (void)modifyParticipantInChatSession:(id)fp8 oldJID:(id)fp12 newJID:(id)fp16 timestamp:(id)fp20;
- (void)removeWAGroupMember:(id)fp8 fromChatSession:(id)fp12 syncDelete:(BOOL)fp16 groupNotification:(id)fp20;
- (void)removeParticipantsWithJIDs:(id)fp8 fromChatSession:(id)fp12 groupNotification:(id)fp16;
- (void)requestRemovalOfMemberJIDs:(id)fp8 fromGroupWithJID:(id)fp12 webClientRequestID:(id)fp16 completion:(id)fp(null);
- (void)requestAdditionOfMemberJIDs:(id)fp8 contacts:(id)fp12 toGroupWithJID:(id)fp16 webClientRequestID:(id)fp20 completion:(id)fp(null);
- (id)addParticipantWithJID:(id)fp8 waContact:(id)fp12 toChatSession:(id)fp16 addMessage:(BOOL)fp20 groupNotification:(id)fp24;
- (id)lastPushNameForGroupMember:(id)fp8 inContext:(id)fp12;
- (void)requestParticipatingGroups:(BOOL)fp8 withCompletion:(id)fp(null);
- (void)requestInfoForGroupWithJID:(id)fp8;
- (void)requestSubjectChangeForGroupWithJID:(id)fp8 to:(id)fp12 webClientRequestID:(id)fp16 completion:(id)fp(null);
- (void)changeSubject:(id)fp8 forChatSession:(id)fp12 groupNotification:(id)fp16;
- (void)endGroupWithWAChatSession:(id)fp8 participantUnknown:(BOOL)fp12 groupNotification:(id)fp16;
- (void)setLockedState:(BOOL)fp8 forChatSession:(id)fp12 groupNotification:(id)fp16;
- (void)requestGroupEndForWAChatSession:(id)fp8;
- (void)requestToLeaveGroupWithJID:(id)fp8 webClientRequestID:(id)fp12 completion:(id)fp(null);
- (void)requestGroupCreateForChatSession:(id)fp8 webClientRequestID:(id)fp12 completion:(id)fp(null);
- (void)retryGroupCreateForChatSession:(id)fp8;
- (id)createChatSessionForContacts:(id)fp8 subject:(id)fp12 picture:(id)fp16 webClientRequestID:(id)fp20 completion:(id)fp(null);
- (id)createChatSessionForContactJIDs:(id)fp8 subject:(id)fp12 picture:(id)fp16 webClientRequestID:(id)fp20 completion:(id)fp(null);
- (id)createChatSessionWithSubject:(id)fp8 groupJID:(id)fp12 groupNotification:(id)fp16;
- (void)createOrUpdateChatSession:(id)fp8 withXMPPGroup:(id)fp12 groupNotification:(id)fp16;
- (BOOL)isJID:(id)fp8 participantInGroupWithJID:(id)fp12;
- (BOOL)hasGroupChatSessions;

@end

